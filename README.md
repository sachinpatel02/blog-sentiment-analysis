# Blog Platform with Sentiment Analysis

A complete, multi-service backend for a modern blog platform, built from the ground up with **FastAPI**. This project features:

- A dedicated service for user authentication
- A service for managing posts and comments with ownership permissions
- A standalone AI/ML microservice for real-time sentiment analysis of comments

---

## üöÄ Key Features

- **Microservice Architecture**  
  Three distinct services (`users`, `posts`, `sentiment`) for clean separation of concerns.

- **Modern Backend Framework**  
  Built with FastAPI, leveraging asynchronous programming (`async/await`) for high performance.

- **Secure Authentication**  
  Full user registration and login flow using password hashing (`bcrypt`) and JWT access tokens.

- **Complete Post Management (CRUD)**  
  Full Create, Read, Update, and Delete API for blog posts.

- **Ownership & Permissions**  
  Update and Delete operations are protected‚Äîonly the post's creator can modify it.

- **Nested Comment System**  
  Full CRUD API for comments, nested under their parent posts.

- **AI-Powered Sentiment Analysis**  
  A dedicated microservice uses `TextBlob` to analyze comment sentiment.

- **Relational Database**  
  Uses cloud-hosted PostgreSQL (Supabase) with an asynchronous driver (`asyncpg`).

- **Type-Safe Code**  
  Utilizes `SQLModel` and `Pydantic` for robust data validation and ORM functionality.

- **Automatic API Documentation**  
  Swagger UI and ReDoc auto-generated by FastAPI.

---

## üß± Architecture Overview

This project follows a **microservice architecture** pattern:

### `users_service` (Port `8000`)

- Identity and access management service
- Issues authentication tokens
- Source of truth for user data

### `posts_service` (Port `8001`)

- Core content management service
- Handles blog posts and comments
- Validates JWTs from `users_service`

### `sentiment_service` (Port `8002`)

- AI/ML inference service
- Accepts text input and returns sentiment analysis

> Services communicate via HTTP API calls using [`httpx`]. They share a PostgreSQL database, but each service operates only on its own tables.

---

## üß∞ Tech Stack

| Category                   | Tool/Library                         |
| -------------------------- | ------------------------------------ |
| **Backend**                | Python 3.10+, FastAPI                |
| **Database**               | PostgreSQL (via Supabase)            |
| **ORM**                    | SQLModel                             |
| **Async Driver**           | asyncpg                              |
| **Authentication**         | JWT (`python-jose`), bcrypt, passlib |
| **AI/ML**                  | TextBlob, NLTK                       |
| **Service Communication**  | httpx                                |
| **Environment Management** | python-dotenv                        |

---

## üõ†Ô∏è Setup and Installation

### 1. Clone the Repository

```bash
git clone <your-repository-url>
cd blog-sentiment-analysis
```

### 2. Create and Activate Virtual Environment

```bash
python -m venv .venv
source .venv/bin/activate
# On Windows:
# .venv\Scripts\activate
```

### 3. Configure Environment Variables

DATABASE_URL="postgresql+asyncpg://user:password@host:port/dbname"
SECRET_KEY="<your_generated_secret_key>"
ALGORITHM="HS256"
ACCESS_TOKEN_EXPIRE_MINUTES=30

### 4. Install Dependencies

```bash
pip install -r requirements.txt
```

### 5. Download AI/ML Data

```bash
python -m textblob.download_corpora

```

## üèÉ‚Äç‚û°Ô∏è Running Services

Open 3 different terminals and run the following commands

```bash
cd services/users_service
uvicorn app.main:app --reload --port 8000

cd services/posts_service
uvicorn app.main:app --reload --port 8001

cd services/sentiment_service
uvicorn app.main:app --reload --port 8002

```
---
## üì° API Endpoints

### user_services
| Method | Path           | Description              | Protected |
| ------ | -------------- | ------------------------ | --------- |
| POST   | `/users/`      | Register a new user      | ‚ùå No      |
| POST   | `/users/token` | Log in and get token     | ‚ùå No      |
| GET    | `/users/me`    | Get current user profile | ‚úÖ Yes     |

### posts_services
| Method | Path                         | Description                | Protected |
| ------ | ---------------------------- | -------------------------- | --------- |
| POST   | `/posts/`                    | Create a new post          | ‚úÖ Yes     |
| GET    | `/posts/`                    | Get all posts              | ‚ùå No      |
| GET    | `/posts/{post_id}`           | Get a post by ID           | ‚ùå No      |
| PUT    | `/posts/{post_id}`           | Update a post (Owner only) | ‚úÖ Yes     |
| DELETE | `/posts/{post_id}`           | Delete a post (Owner only) | ‚úÖ Yes     |
| POST   | `/posts/{post_id}/comments/` | Add comment to post        | ‚úÖ Yes     |
| GET    | `/posts/{post_id}/comments/` | Get comments for a post    | ‚ùå No      |

### sentiment_service
| Method | Path        | Description                     | Protected |
| ------ | ----------- | ------------------------------- | --------- |
| POST   | `/analyze/` | Analyze sentiment of given text | ‚ùå No      |

---
